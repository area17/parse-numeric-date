let e=(new Intl.NumberFormat).resolvedOptions().locale;const t=(new Date).setHours(0,0,0,0),n=new Date(t).getFullYear(),a=()=>{const t=new Date(2e3,11,13).toLocaleDateString(e);return[{name:"d",index:t.indexOf("13")},{name:"m",index:t.indexOf("12")},{name:"y",index:t.indexOf("2000")}].sort((e,t)=>e.index-t.index).map(e=>e.name).join("-")};let r=a();const l=e=>{if(2===e.length){let t=50,a=1e3*Math.floor(n/1e3)+parseInt(e,10),r=Math.abs(a-(n+t));return a<n+t||r>100?a:a-100}return e},Y=(e,t,n)=>e.substring(t.indexOf(n),t.indexOf(n)+(t.match(new RegExp(n,"g"))||[]).length),s=(e,t)=>t.map(t=>((e,t)=>{const n=[{name:"d",index:t.indexOf("D")},{name:"m",index:t.indexOf("M")},{name:"y",index:t.indexOf("Y")}].sort((e,t)=>e.index-t.index);return{y:Y(e,t,"Y"),m:Y(e,t,"M"),d:Y(e,t,"D"),order:n.map(e=>e.name).join("-")}})(e,t)),D=(e,t,n)=>{e=l(e),e=parseInt(e,10),t=parseInt(t,10),n=(n=parseInt(n,10))>((e,t)=>new Date(t,e,0).getDate())(t=t>12?null:t,e)?null:n,t=t<10?`0${t}`:t,n=n<10?`0${n}`:n;let a=new Date(`${e}-${t}-${n}T00:00:00.000+00:00`);return a instanceof Date&&!isNaN(a)?a:null},o=(e,n)=>{const a=(e=e.map(e=>(e.d=D(e.y,e.m,e.d),e.y=parseInt(l(e.y),10),e.diff=Math.abs(t-e.d),e.score=r===e.order?2:1,e.diff>315576e7&&e.score--,e.diff<631152e5&&e.score++,e)).filter(e=>null!==e.d).sort((e,t)=>t.score-e.score)).length?e[0].score:0;return(e=e.filter(e=>e.score===a).sort((e,t)=>e.diff-t.diff).map(e=>e.d)).length?e[0]:null},d=(t,n)=>{null!=n&&n.locale&&(e=n.locale,r=a());let l=t,Y=[],d=[...(t=t.replace(/[۰-۹]/g,e=>"۰۱۲۳۴۵۶۷۸۹".indexOf(e)).replace(/[٠-٩]/g,e=>"٠١٢٣٤٥٦٧٨٩".indexOf(e)).trim()).matchAll(/([0-9]{4})[^0-9]{1,}([0-9]{1,2})[^0-9]{1,}([0-9]{1,2})/g)];return d.length>0?l.match(/[۰-۹]/g)?function(e,t,n){e=parseInt(e,10),t=parseInt(t,10),n=parseInt(n,10);const a=new Intl.DateTimeFormat("en-u-ca-persian",{dateStyle:"short",timeZone:"UTC"});let r=new Date(Date.UTC(2e3,t,n));r=new Date(r.setUTCDate(r.getUTCDate()+226867));const l=r.getUTCFullYear()-2e3+e;r=new Date((l<0?"-":"+")+("00000"+Math.abs(l)).slice(-6)+"-"+("0"+(r.getUTCMonth()+1)).slice(-2)+"-"+("0"+r.getUTCDate()).slice(-2));let[Y,s,D]=[...a.format(r).split("/")],o=0;for(r=new Date(r.setUTCDate(r.getUTCDate()+Math.floor(365.25*e+30.44*t+n-(365.25*D.split(" ")[0]+30.44*Y+1*s))-2));o<4;){if([Y,s,D]=[...a.format(r).split("/")],parseInt(s,10)===n&&parseInt(Y,10)===t&&parseInt(D.split(" ")[0],10)===e)return r;r=new Date(r.setUTCDate(r.getUTCDate()+1)),o++}throw console.log("Invalid Persian date"),new Error("Invalid Persian date")}(d[0][1],d[0][2],d[0][3]):D(d[0][1],d[0][2],d[0][3]):(d=[...t.matchAll(/([0-9]{1,2})[^0-9]{1,}([0-9]{2})[^0-9]{1,}([0-9]{4})/g)],d.length>0?(Y.push({y:d[0][3],m:d[0][2],d:d[0][1],order:"d-m-y"}),Y.push({y:d[0][3],m:d[0][1],d:d[0][2],order:"m-d-y"}),o(Y)):(d=[...t.matchAll(/([0-9]{1,2})[^0-9]{1,}([0-9]{1,2})[^0-9]{1,}([0-9]{1,2})/g)],d.length>0?(Y.push({y:d[0][3],m:d[0][2],d:d[0][1],order:"d-m-y"}),Y.push({y:d[0][3],m:d[0][1],d:d[0][2],order:"m-d-y"}),Y.push({y:d[0][1],m:d[0][2],d:d[0][3],order:"y-m-d"}),o(Y)):(d=[...t.matchAll(/[0-9]{1,}/g)],d.length>0?(8===t.length&&(Y=s(t,["YYYYMMDD","DDMMYYYY","MMDDYYYY"])),7===t.length&&(Y=s(t,["YYYYMMD","YYYYMDD","DDMYYYY","MDDYYYY","DMMYYYY","MMDYYYY"])),6===t.length&&(Y=s(t,["YYMMDD","DDMMYY","MMDDYY","YYYYMD","DMYYYY","MDYYYY"])),5===t.length&&(Y=s(t,["YYMMD","YYMDD","DDMYY","MDDYY","DMMYY","MMDYY"])),4===t.length&&(Y=s(t,["YYMD","DMYY","MDYY"])),o(Y)):(console.log("parseNumericDate - unknown format:",t),null))))};export{d as default};
//# sourceMappingURL=parse-numeric-date.modern.js.map
