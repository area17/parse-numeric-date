let e=(new Intl.NumberFormat).resolvedOptions().locale;const t=(new Date).setHours(0,0,0,0);new Date(t).getFullYear();const n=()=>{const t=new Date(2e3,11,13).toLocaleDateString(e);return[{name:"d",index:t.indexOf("13")},{name:"m",index:t.indexOf("12")},{name:"y",index:t.indexOf("2000")}].sort((e,t)=>e.index-t.index).map(e=>e.name).join("-")};let a=n();const Y=e=>2===e.length?parseInt(e)>60?`19${e}`:`20${e}`:e,r=(e,t,n)=>e.substring(t.indexOf(n),t.indexOf(n)+(t.match(new RegExp(n,"g"))||[]).length),l=(e,t)=>t.map(t=>((e,t)=>{const n=[{name:"d",index:t.indexOf("D")},{name:"m",index:t.indexOf("M")},{name:"y",index:t.indexOf("Y")}].sort((e,t)=>e.index-t.index);return{y:r(e,t,"Y"),m:r(e,t,"M"),d:r(e,t,"D"),order:n.map(e=>e.name).join("-")}})(e,t)),s=(e,t,n)=>{e=Y(e),e=parseInt(e,10),t=parseInt(t,10),n=(n=parseInt(n,10))>((e,t)=>new Date(t,e,0).getDate())(t=t>12?null:t,e)?null:n,t=t<10?`0${t}`:t,n=n<10?`0${n}`:n;let a=new Date(`${e}-${t}-${n}T00:00:00.000+00:00`);return a instanceof Date&&!isNaN(a)?a:null},D=(e,n)=>{const r=(e=e.map(e=>(e.d=s(e.y,e.m,e.d),e.y=parseInt(Y(e.y),10),e.diff=Math.abs(t-e.d),e.score=a===e.order?2:1,e.diff>315576e7&&e.score--,e.diff<631152e5&&e.score++,e)).filter(e=>null!==e.d).sort((e,t)=>t.score-e.score)).length?e[0].score:0;return(e=e.filter(e=>e.score===r).sort((e,t)=>e.diff-t.diff).map(e=>e.d)).length?e[0]:null},d=(t,Y)=>{null!=Y&&Y.locale&&(e=Y.locale,a=n());let r=t,d=[],o=[...(t=t.replace(/[۰-۹]/g,e=>"۰۱۲۳۴۵۶۷۸۹".indexOf(e)).replace(/[٠-٩]/g,e=>"٠١٢٣٤٥٦٧٨٩".indexOf(e)).trim()).matchAll(/([0-9]{4})[^0-9]{1,}([0-9]{1,2})[^0-9]{1,}([0-9]{1,2})/g)];return o.length>0?r.match(/[۰-۹]/g)?function(e,t,n){e=parseInt(e,10),t=parseInt(t,10),n=parseInt(n,10);const a=new Intl.DateTimeFormat("en-u-ca-persian",{dateStyle:"short",timeZone:"UTC"});let Y=new Date(Date.UTC(2e3,t,n));Y=new Date(Y.setUTCDate(Y.getUTCDate()+226867));const r=Y.getUTCFullYear()-2e3+e;Y=new Date((r<0?"-":"+")+("00000"+Math.abs(r)).slice(-6)+"-"+("0"+(Y.getUTCMonth()+1)).slice(-2)+"-"+("0"+Y.getUTCDate()).slice(-2));let[l,s,D]=[...a.format(Y).split("/")],d=0;for(Y=new Date(Y.setUTCDate(Y.getUTCDate()+Math.floor(365.25*e+30.44*t+n-(365.25*D.split(" ")[0]+30.44*l+1*s))-2));d<4;){if([l,s,D]=[...a.format(Y).split("/")],parseInt(s,10)===n&&parseInt(l,10)===t&&parseInt(D.split(" ")[0],10)===e)return Y;Y=new Date(Y.setUTCDate(Y.getUTCDate()+1)),d++}throw console.log("Invalid Persian date"),new Error("Invalid Persian date")}(o[0][1],o[0][2],o[0][3]):s(o[0][1],o[0][2],o[0][3]):(o=[...t.matchAll(/([0-9]{1,2})[^0-9]{1,}([0-9]{2})[^0-9]{1,}([0-9]{4})/g)],o.length>0?(d.push({y:o[0][3],m:o[0][2],d:o[0][1],order:"d-m-y"}),d.push({y:o[0][3],m:o[0][1],d:o[0][2],order:"m-d-y"}),D(d)):(o=[...t.matchAll(/([0-9]{1,2})[^0-9]{1,}([0-9]{1,2})[^0-9]{1,}([0-9]{1,2})/g)],o.length>0?(d.push({y:o[0][3],m:o[0][2],d:o[0][1],order:"d-m-y"}),d.push({y:o[0][3],m:o[0][1],d:o[0][2],order:"m-d-y"}),d.push({y:o[0][1],m:o[0][2],d:o[0][3],order:"y-m-d"}),D(d)):(8===t.length&&(d=l(t,["YYYYMMDD","DDMMYYYY","MMDDYYYY"])),7===t.length&&(d=l(t,["YYYYMMD","YYYYMDD","DDMYYYY","MDDYYYY","DMMYYYY","MMDYYYY"])),6===t.length&&(d=l(t,["YYMMDD","DDMMYY","MMDDYY","YYYYMD","DMYYYY","MDYYYY"])),5===t.length&&(d=l(t,["YYMMD","YYMDD","DDMYY","MDDYY","DMMYY","MMDYY"])),4===t.length&&(d=l(t,["YYMD","DMYY","MDYY"])),D(d))))};export{d as default};
//# sourceMappingURL=parse-numeric-date.modern.js.map
