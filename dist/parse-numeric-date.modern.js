let s=(new Intl.NumberFormat).resolvedOptions().locale;const r=(new Date).setHours(0,0,0,0);new Date(r).getFullYear();const t=()=>{const r=new Date(2e3,11,13).toLocaleDateString(s);return[{name:"d",index:r.indexOf("13")},{name:"m",index:r.indexOf("12")},{name:"y",index:r.indexOf("2000")}].sort((s,r)=>s.index-r.index).map(s=>s.name).join("-")};let e=t();const n=s=>2===s.length?parseInt(s)>60?`19${s}`:`20${s}`:s,u=(s,r,t)=>{s=n(s),s=parseInt(s,10),r=parseInt(r,10),t=(t=parseInt(t,10))>((s,r)=>new Date(r,s,0).getDate())(r=r>12?null:r,s)?null:t,r=r<10?`0${r}`:r,t=t<10?`0${t}`:t;let e=new Date(`${s}-${r}-${t}T00:00:00.000+00:00`);return e instanceof Date&&!isNaN(e)?e:null},d=(s,t)=>{const d=(s=s.map(s=>(s.d=u(s.y,s.m,s.d),s.y=parseInt(n(s.y),10),s.diff=Math.abs(r-s.d),s.score=e===s.order?2:1,s.diff>315576e7&&s.score--,s.diff<631152e5&&s.score++,s)).filter(s=>null!==s.d).sort((s,r)=>r.score-s.score)).length?s[0].score:0;return(s=s.filter(s=>s.score===d).sort((s,r)=>s.diff-r.diff).map(s=>s.d)).length?s[0]:null},i=(r,n)=>{null!=n&&n.locale&&(s=n.locale,e=t());let i=r,g=[],m=[...(r=r.replace(/[۰-۹]/g,s=>"۰۱۲۳۴۵۶۷۸۹".indexOf(s)).replace(/[٠-٩]/g,s=>"٠١٢٣٤٥٦٧٨٩".indexOf(s)).trim()).matchAll(/([0-9]{4})[^0-9]{1,}([0-9]{1,2})[^0-9]{1,}([0-9]{1,2})/g)];return m.length>0?i.match(/[۰-۹]/g)?function(s,r,t){s=parseInt(s,10),r=parseInt(r,10),t=parseInt(t,10);const e=new Intl.DateTimeFormat("en-u-ca-persian",{dateStyle:"short",timeZone:"UTC"});let n=new Date(Date.UTC(2e3,r,t));n=new Date(n.setUTCDate(n.getUTCDate()+226867));const u=n.getUTCFullYear()-2e3+s;n=new Date((u<0?"-":"+")+("00000"+Math.abs(u)).slice(-6)+"-"+("0"+(n.getUTCMonth()+1)).slice(-2)+"-"+("0"+n.getUTCDate()).slice(-2));let[d,i,g]=[...e.format(n).split("/")],m=0;for(n=new Date(n.setUTCDate(n.getUTCDate()+Math.floor(365.25*s+30.44*r+t-(365.25*g.split(" ")[0]+30.44*d+1*i))-2));m<4;){if([d,i,g]=[...e.format(n).split("/")],parseInt(i,10)===t&&parseInt(d,10)===r&&parseInt(g.split(" ")[0],10)===s)return n;n=new Date(n.setUTCDate(n.getUTCDate()+1)),m++}throw console.log("Invalid Persian date"),new Error("Invalid Persian date")}(m[0][1],m[0][2],m[0][3]):u(m[0][1],m[0][2],m[0][3]):(m=[...r.matchAll(/([0-9]{1,2})[^0-9]{1,}([0-9]{2})[^0-9]{1,}([0-9]{4})/g)],m.length>0?(g.push({y:m[0][3],m:m[0][2],d:m[0][1],order:"d-m-y"}),g.push({y:m[0][3],m:m[0][1],d:m[0][2],order:"m-d-y"}),d(g)):(m=[...r.matchAll(/([0-9]{1,2})[^0-9]{1,}([0-9]{1,2})[^0-9]{1,}([0-9]{1,2})/g)],m.length>0?(g.push({y:m[0][3],m:m[0][2],d:m[0][1],order:"d-m-y"}),g.push({y:m[0][3],m:m[0][1],d:m[0][2],order:"m-d-y"}),g.push({y:m[0][1],m:m[0][2],d:m[0][3],order:"y-m-d"}),d(g)):(8===r.length&&(g.push({y:r.substring(4,8),m:r.substring(2,4),d:r.substring(0,2),order:"d-m-y"}),g.push({y:r.substring(4,8),m:r.substring(0,2),d:r.substring(2,4),order:"m-d-y"}),g.push({y:r.substring(0,4),m:r.substring(4,6),d:r.substring(6,8),order:"y-m-d"})),7===r.length&&(g.push({y:r.substring(0,4),m:r.substring(4,6),d:r.substring(6,7),order:"y-m-d"}),g.push({y:r.substring(0,4),m:r.substring(4,5),d:r.substring(5,7),order:"y-m-d"}),g.push({y:r.substring(3,7),m:r.substring(2,3),d:r.substring(0,2),order:"d-m-y"}),g.push({y:r.substring(3,7),m:r.substring(1,3),d:r.substring(0,1),order:"d-m-y"}),g.push({y:r.substring(3,7),m:r.substring(0,2),d:r.substring(2,3),order:"d-m-y"}),g.push({y:r.substring(3,7),m:r.substring(0,1),d:r.substring(2,3),order:"d-m-y"})),6===r.length&&(g.push({y:r.substring(4,6),m:r.substring(2,4),d:r.substring(0,2),order:"d-m-y"}),g.push({y:r.substring(4,6),m:r.substring(0,2),d:r.substring(2,4),order:"m-d-y"}),g.push({y:r.substring(0,2),m:r.substring(2,4),d:r.substring(4,6),order:"y-m-d"}),g.push({y:r.substring(2,6),m:r.substring(1,2),d:r.substring(0,1),order:"d-m-y"}),g.push({y:r.substring(2,6),m:r.substring(0,1),d:r.substring(1,2),order:"m-d-y"}),g.push({y:r.substring(0,4),m:r.substring(4,5),d:r.substring(5,6),order:"y-m-d"})),5===r.length&&(g.push({y:r.substring(0,2),m:r.substring(2,4),d:r.substring(4,5),order:"y-m-d"}),g.push({y:r.substring(0,2),m:r.substring(2,3),d:r.substring(3,5),order:"y-m-d"}),g.push({y:r.substring(3,5),m:r.substring(2,3),d:r.substring(0,2),order:"d-m-y"}),g.push({y:r.substring(3,5),m:r.substring(1,3),d:r.substring(0,1),order:"d-m-y"}),g.push({y:r.substring(3,5),m:r.substring(0,2),d:r.substring(2,3),order:"d-m-y"}),g.push({y:r.substring(3,5),m:r.substring(0,1),d:r.substring(2,3),order:"d-m-y"})),4===r.length&&(g.push({y:r.substring(2,4),m:r.substring(1,2),d:r.substring(0,1),order:"d-m-y"}),g.push({y:r.substring(2,4),m:r.substring(0,1),d:r.substring(1,2),order:"m-d-y"}),g.push({y:r.substring(0,2),m:r.substring(2,3),d:r.substring(3,4),order:"y-m-d"})),d(g))))};export{i as default};
//# sourceMappingURL=parse-numeric-date.modern.js.map
